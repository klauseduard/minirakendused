<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZFD132PZ0Z"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        
        gtag('config', 'G-ZFD132PZ0Z', {
            'page_path': '/minirakendused/gardening_calendar'
        });
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spring Gardening and Planting Calendar</title>
    <link rel="stylesheet" href="gardening_calendar/styles.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üå±</text></svg>">
</head>
<body>
    <div class="container">
        <header>
            <h1>Spring Gardening and Planting Calendar</h1>
            <div class="quick-jump-menu" id="quickJumpMenu">
                <div class="quick-jump-title">Quick Navigation:</div>
                <button class="quick-jump-btn" data-section="location-setup">
                    <span class="nav-icon">üìç</span> Location
                </button>
                <button class="quick-jump-btn" data-section="weather-info">
                    <span class="nav-icon">üå§Ô∏è</span> Weather
                </button>
                <button class="quick-jump-btn" data-section="search-section">
                    <span class="nav-icon">ü§ñ</span> Search & AI
                </button>
                <button class="quick-jump-btn" data-section="monthly-calendar">
                    <span class="nav-icon">üìÖ</span> Calendar
                </button>
                <button class="quick-jump-btn" data-section="garden-journal">
                    <span class="nav-icon">üìî</span> Journal
                </button>
            </div>
        </header>

        <main class="main-layout">
            <!-- Location and Units Controls -->
            <section class="top-controls" id="location-setup">
                <div class="location-row">
                    <div class="location-input-group">
                        <label for="locationInput" class="visually-hidden">Location</label>
                        <input type="text" class="location-input" id="locationInput" 
                            placeholder="City or place name (e.g., Paris, Barcelona)" 
                            aria-label="Location">
                        <button type="button" id="clearLocationBtn" class="location-clear-btn" 
                            aria-label="Clear location">√ó</button>
                    </div>
                    <button class="location-action-btn search-location-btn" id="searchLocationBtn">
                        <span class="search-icon">üîç</span> Search
                    </button>
                    <button class="location-action-btn geo-location-btn" id="useMyLocationBtn">
                        <span class="location-icon">üìç</span> My Location
                    </button>
                </div>
                <div class="units-row">
                    <div class="unit-group">
                        <label for="tempUnitSelect">Temperature:</label>
                        <select id="tempUnitSelect" aria-label="Temperature unit">
                            <option value="C">Celsius (¬∞C)</option>
                            <option value="F">Fahrenheit (¬∞F)</option>
                        </select>
                    </div>
                    <div class="unit-group">
                        <label for="precipUnitSelect">Precipitation:</label>
                        <select id="precipUnitSelect" aria-label="Precipitation unit">
                            <option value="mm">Millimeters (mm)</option>
                            <option value="in">Inches (in)</option>
                        </select>
                    </div>
                </div>
                <div id="climateZoneInfo"></div>
            </section>

            <!-- Weather Display -->
            <section class="weather-display" id="weather-info">
                <div class="weather-placeholder" id="weatherPlaceholder">
                    Weather information for your location will appear here.
                </div>
            </section>

            <!-- Search Bar -->
            <section class="search-bar" id="search-section">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <h2 class="search-section-title">Search & AI Garden Assistant</h2>
                    <button id="aiAdviceBtn" class="ai-advice-btn" style="padding: 8px 16px; background: var(--secondary-color); color: white; border: none; border-radius: 20px; display: flex; align-items: center; gap: 8px; font-weight: 500; cursor: pointer; transition: background-color 0.3s;">
                        <span style="font-size: 1.2em;">ü§ñ</span>
                        <span>Generate AI gardening advice prompt</span>
                    </button>
                </div>
                <div class="search-container">
                    <label for="searchBox" class="visually-hidden">Search for plants or tasks</label>
                    <input type="text" class="search-box" id="searchBox" 
                        placeholder="Type to search for specific plants or garden tasks..." 
                        aria-label="Search for plants or tasks">
                </div>
            </section>

            <!-- Month Navigation -->
            <section class="month-navigation" id="monthly-calendar">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <h2 class="month-nav-title">Select Growing Period</h2>
                </div>
                <div class="calendar-nav">
                    <button class="month-btn active" data-month="april">April</button>
                    <button class="month-btn" data-month="may">May</button>
                    <button class="month-btn" data-month="early_june">Early June</button>
                </div>
            </section>

            <!-- Calendar Content -->
            <section class="calendar-content" id="calendarContent">
                <!-- Content will be added by JavaScript -->
            </section>

            <!-- Garden Journal Section -->
            <section class="garden-journal" id="garden-journal" style="display: none;">
                <div class="journal-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h2 class="journal-title" style="color: var(--primary-color); font-size: 1.4rem;">Garden Journal</h2>
                    <div style="display: flex; gap: 10px;">
                        <button id="exportJournalBtn" class="journal-btn" style="padding: 8px 12px; background: var(--primary-color); color: white; border: none; border-radius: 20px; display: flex; align-items: center; gap: 5px; font-weight: 500; cursor: pointer; transition: background-color 0.3s;">
                            <span style="font-size: 1.1em;">üì§</span>
                            <span>Export</span>
                        </button>
                        <button id="importJournalBtn" class="journal-btn" style="padding: 8px 12px; background: var(--primary-color); color: white; border: none; border-radius: 20px; display: flex; align-items: center; gap: 5px; font-weight: 500; cursor: pointer; transition: background-color 0.3s;">
                            <span style="font-size: 1.1em;">üì•</span>
                            <span>Import</span>
                        </button>
                        <button id="addJournalEntryBtn" class="journal-add-btn" style="padding: 8px 12px; background: var(--secondary-color); color: white; border: none; border-radius: 20px; display: flex; align-items: center; gap: 5px; font-weight: 500; cursor: pointer; transition: background-color 0.3s;">
                            <span style="font-size: 1.1em;">‚ûï</span>
                            <span>New Entry</span>
                        </button>
                    </div>
                </div>
                
                <div class="journal-tabs">
                    <button class="journal-tab active" data-view="timeline">Timeline</button>
                    <button class="journal-tab" data-view="gallery">Photo Gallery</button>
                    <button class="journal-tab" data-view="calendar">Calendar</button>
                </div>
                
                <div id="journalContent" class="journal-content" style="background: var(--white); border-radius: 10px; padding: 20px; box-shadow: 0 2px 8px var(--shadow);">
                    <!-- Will be populated by JavaScript -->
                    <div id="emptyJournalMessage" style="text-align: center; padding: 40px 20px;">
                        <div style="font-size: 3rem; margin-bottom: 20px;">üìî</div>
                        <h3 style="margin-bottom: 15px; color: var(--primary-color);">Your Garden Journal is Empty</h3>
                        <p style="margin-bottom: 20px; color: #666;">Start documenting your gardening journey by adding your first entry!</p>
                        <button id="emptyJournalAddBtn" class="journal-add-btn" style="padding: 10px 20px; background: var(--secondary-color); color: white; border: none; border-radius: 20px; font-weight: 500; cursor: pointer; display: inline-flex; align-items: center; gap: 8px;">
                            <span>‚ûï</span> Add First Entry
                        </button>
                    </div>
                    
                    <div id="journalTimeline" style="display: none;">
                        <!-- Timeline entries will be added here -->
                    </div>
                    
                    <div id="journalGallery" style="display: none;">
                        <!-- Photo gallery will be added here -->
                    </div>
                    
                    <div id="journalCalendar" style="display: none;">
                        <!-- Calendar view will be added here -->
                    </div>
                </div>
            </section>

            <button class="scroll-to-top" id="scrollToTop" aria-label="Scroll to top" style="display: none;">
                ‚Üë
            </button>
        </main>

        <!-- Prompt Generator Modal -->
        <div id="promptGeneratorModal" class="weather-modal-overlay" style="display: none;">
            <div class="weather-modal" style="width: 90%; max-width: 800px;">
                <button class="weather-modal-close" id="closePromptGeneratorBtn" aria-label="Close prompt generator">&times;</button>
                <div class="weather-modal-title">AI Gardening Assistant</div>
                <div style="margin: 20px 0;">
                    <p style="margin-bottom: 15px; color: #666;">
                        This tool will generate a comprehensive prompt based on your location, weather, and garden information. 
                        You can use this prompt with any AI assistant to get personalized gardening advice.
                    </p>
                    <div style="margin-bottom: 15px;">
                        <label for="customNotes" style="display: block; margin-bottom: 8px; font-weight: 500;">Your notes about your garden:</label>
                        <textarea id="customNotes" rows="4" style="width: 100%; padding: 10px; border: 1px solid var(--secondary-color); border-radius: 8px; margin-bottom: 10px;" placeholder="Describe your garden's current state, what you've already done, or ask specific questions..."></textarea>
                    </div>
                    <div style="margin-bottom: 15px; padding: 12px; background: #fff3e0; border-radius: 8px;">
                        <h3 style="margin-bottom: 10px; color: #e65100; font-size: 1rem;">Include in Prompt:</h3>
                        <div style="display: flex; flex-direction: column; gap: 8px;">
                            <label style="display: block;">
                                <input type="checkbox" id="includeCalendar" checked>
                                Selected plants and tasks
                                <span style="margin-left: 5px; color: #666; font-size: 0.9em;">
                                    (Your checked items from the planting calendar)
                                </span>
                            </label>
                            <label style="display: block;">
                                <input type="checkbox" id="includeRelevantPlantsOnly" checked>
                                Filter for weather conditions
                                <span style="margin-left: 5px; color: #666; font-size: 0.9em;">
                                    (Only include plants suitable for current forecast)
                                </span>
                            </label>
                        </div>
                    </div>
                    <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                        <button id="generatePromptBtn" class="location-btn">Generate Prompt</button>
                        <button id="copyPromptBtn" class="location-btn" style="background: var(--accent-color);">Copy to Clipboard</button>
                    </div>
                    <div id="generatedPrompt" style="background: #f8faf5; border-radius: 8px; padding: 15px; white-space: pre-wrap; font-family: monospace; max-height: 400px; overflow-y: auto;">
                        Click "Generate Prompt" to create a customized gardening prompt based on your location, weather, and calendar data.
                    </div>
                    
                    <!-- AI Assistants Integration -->
                    <div id="promptDestinationSection" style="margin-top: 20px; display: none;">
                        <h3 style="margin-bottom: 15px; font-size: 1.1rem; color: var(--primary-color);">Send Prompt Directly To:</h3>
                        <div class="ai-assistants-grid">
                            <button class="ai-assistant-btn" data-assistant="chatgpt">
                                <div class="ai-icon" style="background-color: #10a37f; color: white; border-radius: 8px;">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                                    </svg>
                                </div>
                                <span>ChatGPT</span>
                            </button>
                            <button class="ai-assistant-btn" data-assistant="claude">
                                <div class="ai-icon" style="background-color: #9A5CF2; color: white; border-radius: 8px;">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <circle cx="12" cy="12" r="10"></circle>
                                        <path d="M12 16v-4"></path>
                                        <path d="M12 8h.01"></path>
                                    </svg>
                                </div>
                                <span>Claude</span>
                            </button>
                            <button class="ai-assistant-btn" data-assistant="gemini">
                                <div class="ai-icon" style="background-color: #1E88E5; color: white; border-radius: 8px;">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                                    </svg>
                                </div>
                                <span>Gemini</span>
                            </button>
                            <button class="ai-assistant-btn" data-assistant="copilot">
                                <div class="ai-icon" style="background-color: #0078d4; color: white; border-radius: 8px;">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                        <line x1="12" y1="8" x2="12" y2="16"></line>
                                        <line x1="8" y1="12" x2="16" y2="12"></line>
                                    </svg>
                                </div>
                                <span>Copilot</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p>Spring Gardening and Planting Calendar ¬© 2025</p>
        </footer>
    </div>

    <!-- Custom Confirmation Modal -->
    <div id="customConfirmModal" class="weather-modal-overlay" style="display: none; z-index: 1000;">
        <div class="weather-modal" style="max-width: 450px; padding: 25px;">
            <div id="confirmModalTitle" style="font-size: 1.2rem; font-weight: 600; color: var(--primary-color); margin-bottom: 15px;">Confirm Action</div>
            <div id="confirmModalMessage" style="margin-bottom: 25px; line-height: 1.5;">Message goes here</div>
            <div style="display: flex; justify-content: flex-end; gap: 12px;">
                <button id="confirmModalCancelBtn" class="button" style="background: #e0e0e0; color: #333; padding: 8px 16px; border: none; border-radius: 20px; cursor: pointer;">Cancel</button>
                <button id="confirmModalOkBtn" class="button" style="background: var(--primary-color); color: white; padding: 8px 16px; border: none; border-radius: 20px; cursor: pointer;">Confirm</button>
            </div>
        </div>
    </div>

    <!-- Export Options Modal -->
    <div id="exportOptionsModal" class="weather-modal-overlay" style="display: none; z-index: 1000;">
        <div class="weather-modal" style="max-width: 450px; padding: 25px;">
            <button class="weather-modal-close" id="exportModalCloseBtn" aria-label="Close export options">&times;</button>
            <div style="font-size: 1.2rem; font-weight: 600; color: var(--primary-color); margin-bottom: 15px;">Export Options</div>
            <div style="margin-bottom: 25px; line-height: 1.5;">Choose how you would like to export your journal:</div>
            
            <div class="export-option" style="display: flex; align-items: center; padding: 12px; border: 1px solid #ddd; border-radius: 8px; margin-bottom: 12px; cursor: pointer;">
                <div style="margin-right: 15px; font-size: 1.5rem;">üì∑</div>
                <div style="flex-grow: 1;">
                    <div style="font-weight: 500;">Complete Export</div>
                    <div style="font-size: 0.9rem; color: #666;">Include all entries with images (larger file size)</div>
                </div>
            </div>
            
            <div class="export-option" style="display: flex; align-items: center; padding: 12px; border: 1px solid #ddd; border-radius: 8px; cursor: pointer;">
                <div style="margin-right: 15px; font-size: 1.5rem;">üìù</div>
                <div style="flex-grow: 1;">
                    <div style="font-weight: 500;">Lightweight Export</div>
                    <div style="font-size: 0.9rem; color: #666;">Text-only export without images (smaller file size)</div>
                </div>
            </div>
            
            <div style="display: flex; justify-content: flex-end; margin-top: 20px;">
                <button id="exportOptionsCancelBtn" class="button" style="background: #e0e0e0; color: #333; padding: 8px 16px; border: none; border-radius: 20px; cursor: pointer; margin-right: 12px;">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Import Options Modal -->
    <div id="importOptionsModal" class="weather-modal-overlay" style="display: none; z-index: 1000;">
        <div class="weather-modal" style="max-width: 450px; padding: 25px;">
            <button class="weather-modal-close" id="importModalCloseBtn" aria-label="Close import options">&times;</button>
            <div style="font-size: 1.2rem; font-weight: 600; color: var(--primary-color); margin-bottom: 15px;">Import Options</div>
            <div id="importStatsMessage" style="margin-bottom: 25px; line-height: 1.5;">Found entries to import.</div>
            
            <div class="import-option" style="display: flex; align-items: center; padding: 12px; border: 1px solid #ddd; border-radius: 8px; margin-bottom: 12px; cursor: pointer;">
                <div style="margin-right: 15px; font-size: 1.5rem;">üîÑ</div>
                <div style="flex-grow: 1;">
                    <div style="font-weight: 500;">Merge</div>
                    <div style="font-size: 0.9rem; color: #666;">Add new entries and update existing ones</div>
                </div>
            </div>
            
            <div class="import-option" style="display: flex; align-items: center; padding: 12px; border: 1px solid #ddd; border-radius: 8px; cursor: pointer;">
                <div style="margin-right: 15px; font-size: 1.5rem;">‚ôªÔ∏è</div>
                <div style="flex-grow: 1;">
                    <div style="font-weight: 500;">Replace All</div>
                    <div style="font-size: 0.9rem; color: #666;">Delete all existing entries and use imported ones</div>
                </div>
            </div>
            
            <div style="display: flex; justify-content: flex-end; margin-top: 20px;">
                <button id="importOptionsCancelBtn" class="button" style="background: #e0e0e0; color: #333; padding: 8px 16px; border: none; border-radius: 20px; cursor: pointer;">Cancel</button>
            </div>
        </div>
    </div>
    
    <!-- Delete Confirmation Modal -->
    <div id="deleteConfirmModal" class="weather-modal-overlay" style="display: none; z-index: 1000;">
        <div class="weather-modal" style="max-width: 450px; padding: 25px;">
            <button class="weather-modal-close" id="deleteModalCloseBtn" aria-label="Close delete confirmation">&times;</button>
            <div style="font-size: 1.2rem; font-weight: 600; color: #d32f2f; margin-bottom: 15px;">Delete Entry</div>
            <div style="margin-bottom: 25px; line-height: 1.5;">Are you sure you want to delete this journal entry? This action cannot be undone.</div>
            <div style="display: flex; justify-content: flex-end; gap: 12px;">
                <button id="deleteConfirmCancelBtn" class="button" style="background: #e0e0e0; color: #333; padding: 8px 16px; border: none; border-radius: 20px; cursor: pointer;">Cancel</button>
                <button id="deleteConfirmBtn" class="button" style="background: #d32f2f; color: white; padding: 8px 16px; border: none; border-radius: 20px; cursor: pointer;">Delete</button>
            </div>
        </div>
    </div>

    <!-- Journal Entry Modal -->
    <div id="journalEntryModal" class="weather-modal-overlay" style="display: none; z-index: 1000;">
        <div class="weather-modal" style="max-width: 600px; padding: 25px;">
            <button class="weather-modal-close" id="journalEntryModalCloseBtn" aria-label="Close journal entry">&times;</button>
            <div id="journalEntryModalTitle" style="font-size: 1.2rem; font-weight: 600; color: var(--primary-color); margin-bottom: 15px;">Add Journal Entry</div>
            
            <form id="journalEntryForm">
                <input type="hidden" id="journalEntryId" value="">
                
                <div style="margin-bottom: 15px;">
                    <label for="entryDate" style="display: block; margin-bottom: 5px; font-weight: 500;">Date</label>
                    <input type="date" id="entryDate" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 8px;" required>
                </div>
                
                <div style="margin-bottom: 15px;">
                    <label for="entryType" style="display: block; margin-bottom: 5px; font-weight: 500;">Entry Type</label>
                    <select id="entryType" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 8px;" required>
                        <option value="planting">üå± Planting</option>
                        <option value="care">üåø Garden Care</option>
                        <option value="harvest">ü•ï Harvest</option>
                        <option value="observation">üëÅÔ∏è Observation</option>
                        <option value="maintenance">üß∞ Maintenance</option>
                    </select>
                </div>
                
                <div style="margin-bottom: 15px;">
                    <label for="entryPlants" style="display: block; margin-bottom: 5px; font-weight: 500;">Plants (comma separated)</label>
                    <input type="text" id="entryPlants" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 8px;" placeholder="E.g. Tomatoes, Basil, Marigolds">
                </div>
                
                <div style="margin-bottom: 15px;">
                    <label for="entryLocation" style="display: block; margin-bottom: 5px; font-weight: 500;">Location in Garden</label>
                    <input type="text" id="entryLocation" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 8px;" placeholder="E.g. North bed, Pot #3, Raised bed">
                </div>
                
                <div id="harvestMetricsContainer" style="margin-bottom: 15px; padding: 12px; border: 1px solid #ddd; border-radius: 8px; display: none;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 500;">Harvest Metrics</label>
                    <div style="display: flex; gap: 10px;">
                        <div style="flex: 1;">
                            <label for="harvestWeight" style="display: block; margin-bottom: 5px;">Weight</label>
                            <input type="text" id="harvestWeight" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 8px;" placeholder="E.g. 2 kg">
                        </div>
                        <div style="flex: 1;">
                            <label for="harvestQuantity" style="display: block; margin-bottom: 5px;">Quantity</label>
                            <input type="text" id="harvestQuantity" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 8px;" placeholder="E.g. 12 tomatoes">
                        </div>
                    </div>
                </div>
                
                <div style="margin-bottom: 15px;">
                    <label for="entryNotes" style="display: block; margin-bottom: 5px; font-weight: 500;">Notes</label>
                    <textarea id="entryNotes" rows="4" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 8px;" placeholder="Write your observations, notes, or tasks here..."></textarea>
                </div>
                
                <div style="margin-bottom: 15px;">
                    <label for="entryPhotos" style="display: block; margin-bottom: 5px; font-weight: 500;">Photos</label>
                    <input type="file" id="entryPhotos" accept="image/*" multiple style="display: none;">
                    <button type="button" id="photoSelectBtn" style="padding: 8px 12px; background: var(--accent-color); color: white; border: none; border-radius: 20px; cursor: pointer; display: flex; align-items: center; gap: 5px;">
                        <span style="font-size: 1.1em;">üì∑</span>
                        <span>Add Photos</span>
                    </button>
                    <div id="photoPreviewContainer" style="display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px;"></div>
                </div>
                
                <div style="display: flex; justify-content: flex-end; gap: 12px; margin-top: 20px;">
                    <button type="button" id="journalEntryCancelBtn" style="padding: 8px 16px; background: #e0e0e0; color: #333; border: none; border-radius: 20px; cursor: pointer;">Cancel</button>
                    <button type="submit" id="journalEntrySaveBtn" style="padding: 8px 16px; background: var(--primary-color); color: white; border: none; border-radius: 20px; cursor: pointer;">Save Entry</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Import main application module -->
    <script type="module" src="gardening_calendar/js/main.js"></script>
</body>
</html> 
